services:
  ws-server:
    build:
      context: .
      dockerfile: ./apps/ws-server/Dockerfile
    container_name: ws-server
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    ports:
      - "3001:3001"
    networks:
      - fcn-network

  http-server:
    build:
      context: .
      dockerfile: ./apps/http-server/Dockerfile
    container_name: http-server
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    ports:
      - "3002:3002"
    networks:
      - fcn-network

  web:
    build:
      context: ./ # Root context of the monorepo
      dockerfile: ./apps/web/Dockerfile
    container_name: web
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    ports:
      - "3000:3000"
    networks:
      - fcn-network

networks:
  fcn-network:
    driver: bridge
